<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Titanic Survival Prediction | Halfdigit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 2rem 1rem;
    }

    .container {
      max-width: 720px;
      margin: auto;
      background: #020617;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.15);
    }

    h1 {
      margin-top: 0;
      font-size: 1.6rem;
    }

    p {
      color: #cbd5f5;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    label {
      font-size: 0.75rem;
      color: #94a3b8;
    }

    input[type="number"] {
      width: 100%;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #334155;
      background: #020617;
      color: #e5e7eb;
    }

    .checkboxes {
      margin-top: 1rem;
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      font-size: 0.85rem;
    }

    button {
      margin-top: 1.5rem;
      width: 100%;
      padding: 0.75rem;
      background: #38bdf8;
      color: #020617;
      border: none;
      border-radius: 999px;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 600;
    }

    button:hover {
      background: #0ea5e9;
    }

    .result {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 8px;
      font-size: 0.95rem;
    }

    .survived {
      background: rgba(34, 197, 94, 0.15);
      border-left: 4px solid #22c55e;
    }

    .not-survived {
      background: rgba(239, 68, 68, 0.15);
      border-left: 4px solid #ef4444;
    }

    .footer-note {
      margin-top: 1.5rem;
      font-size: 0.75rem;
      color: #94a3b8;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Titanic Survival Prediction</h1>

    <p>
      This demo shows a <strong>machine learning classification API</strong> that predicts
      passenger survival based on demographic and travel attributes.
      The model is deployed as a REST API and invoked in real time.
    </p>

    <form id="form">
      <div class="form-grid">
        <div>
          <label>Passenger Class</label>
          <input type="number" name="pclass" min="1" max="3" placeholder="1, 2 or 3" value="3" required />
          <small>1 = First class</small>
        </div>

        <div>
          <label>Age</label>
          <input type="number" name="age" step="0.1" placeholder="e.g. 28" value="28" required />
        </div>

        <div>
          <label>Siblings / Spouses</label>
          <input type="number" name="sibsp" placeholder="e.g. 0" value="0" required />
        </div>

        <div>
          <label>Parents / Children</label>
          <input type="number" name="parch" placeholder="e.g. 0" value="0" required />
        </div>
      </div>

      <div class="checkboxes">
        <label><input type="checkbox" name="adult_male" checked /> Adult Male</label>
        <label><input type="checkbox" name="alone" checked /> Traveling Alone</label>
        <label><input type="checkbox" name="male" checked /> Male</label>
      </div>

      <button type="submit">Run Prediction</button>
    </form>

    <div id="result"></div>
    <details style="margin-top:1.5rem;">
      <summary style="cursor:pointer;color:#38bdf8;">
        How does this model work?
      </summary>
      <p style="font-size:0.85rem;color:#cbd5f5;margin-top:0.75rem;">
        This is a supervised machine learning classification model trained on the Titanic dataset.
        Key features such as passenger class, age, family size, and gender were engineered and used
        to predict survival probability. The model is deployed as a REST API and invoked in real time.
      </p>
    </details>





    <div class="footer-note">
      Model: Logistic Regression / Random Forest · Features engineered · API logged to database
    </div>
  </div>

  <script>
    const form = document.getElementById("form");
    const resultDiv = document.getElementById("result");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      resultDiv.textContent = "Running prediction...";

      const payload = {
        pclass: form.pclass.value,
        age: form.age.value,
        sibsp: form.sibsp.value,
        parch: form.parch.value,
        adult_male: form.adult_male.checked ? 1 : 0,
        alone: form.alone.checked ? 1 : 0,
        male: form.male.checked ? 1 : 0
      };

      const response = await fetch(
        "https://halfdigit-api.onrender.com/predict-titanic",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        }
      );

      const data = await response.json();

      resultDiv.className =
        "result " + (data.survived ? "survived" : "not-survived");

      resultDiv.innerHTML = `
        <strong>Prediction:</strong>
        <span style="font-size:1.1rem;font-weight:600">
          ${data.survived ? "Survived" : "Did Not Survive"}
        </span><br/><br/>
        <strong>Confidence:</strong> ${(data.probability * 100).toFixed(1)}%<br/>
        <small>
          Based on passenger demographics and travel attributes.
        </small>
      `;

    });
  </script>
</body>

</html>